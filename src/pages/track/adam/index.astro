---
import SkyLayout from "../../../layouts/SkyLayout.astro";
---

<SkyLayout title="Adam · Track" bg="sky">
  <style>
    .wrap{max-width:680px;margin:0 auto;padding:28px 18px;}
    .card{border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:16px;background:rgba(0,0,0,.25)}
    .k{font-size:11px;letter-spacing:.16em;text-transform:uppercase;opacity:.7}
    h1{margin:8px 0 4px;font-size:28px}
    .sub{margin:0 0 14px;color:rgba(255,255,255,.7);font-size:13px;line-height:1.45}
    label{display:block;font-size:12px;letter-spacing:.14em;text-transform:uppercase;opacity:.75;margin:10px 0 6px}
    input{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:rgba(0,0,0,.25);color:rgba(255,255,255,.9)}
    button{margin-top:14px;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:rgba(255,255,255,.9);cursor:pointer}
    .err{margin-top:10px;color:rgba(255,205,140,.9);font-size:13px;opacity:0;transition:opacity .25s ease}
  </style>

  <div class="wrap">
    <div class="card">
      <div class="k">TRACK · ADAM</div>
      <h1>Gate</h1>
      <p class="sub">Enter key to open this track on this device.</p>

      <form id="gate-form">
        <label for="gate-key">Passkey</label>
        <input id="gate-key" type="password" autocomplete="current-password" required />
        <button type="submit">Enter</button>
        <div id="gate-error" class="err"></div>
      </form>
    </div>
  </div>

  <script type="module">
    import { gate } from "/js/_client-gate.js";

    const ADAM_KEY = "compass";

    gate({
      who: "adam",
      storageKey: "starmap_unlocked_adam",
      expectedKey: ADAM_KEY,
      nextDefault: "/track/adam/arrival",
      formId: "gate-form",
      inputId: "gate-key",
      errorId: "gate-error"
    });
  </script>
</SkyLayout>
